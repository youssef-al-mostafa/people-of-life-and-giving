import{r as A,j as s,a as w}from"./app-Czs23nQE.js";import{u as F,F as g,a as n,b as i,c as m,d as c,e as d,B as C,s as S,f}from"./index-bPRgQ2sw.js";import{z as p}from"./index-C4bLmoCR.js";import{I as l}from"./input-D5JXjANv.js";import"./utils-DExUAd-r.js";import"./index-BIAITH7B.js";const y=p.string().min(8,"Password must be at least 8 characters").max(20,"Password cannot exceed 20 characters").refine(e=>/[A-Z]/.test(e),"Password must contain at least one uppercase letter").refine(e=>/[a-z]/.test(e),"Password must contain at least one lowercase letter").refine(e=>/\d/.test(e),"Password must contain at least one number"),E=p.object({name:p.string().min(2).max(50),email:p.string().email(),password:y,passwordConfirmation:y}).refine(e=>e.password===e.passwordConfirmation,{message:"Passwords do not match",path:["passwordConfirmation"]}),O=()=>{const[e,u]=A.useState(!1),o=F({resolver:S(E),defaultValues:{name:"",email:"",password:"",passwordConfirmation:""}});async function b(r){var h;try{u(!0);const a=route("admin.add"),{passwordConfirmation:x,...j}=r,t=await w.post(a,j,{headers:{"X-CSRF-TOKEN":(h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.getAttribute("content"),"Content-Type":"application/json",Accept:"application/json"}});f.success("Admin created successfully"),o.reset()}catch(a){if(w.isAxiosError(a)&&a.response){const x=a.response.data.errors;x?Object.entries(x).forEach(([j,t])=>{o.setError(j,{type:"server",message:Array.isArray(t)?t[0]:t})}):f.error(a.response.data.message||"An error occurred")}else f.error("Failed to create admin"),console.error("Error creating admin:",a)}finally{u(!1)}}return s.jsx(g,{...o,children:s.jsxs("form",{onSubmit:o.handleSubmit(b),className:"space-y-8 w-fit mx-auto",children:[s.jsxs("div",{className:"flex gap-6",children:[s.jsx(n,{name:"name",render:({field:r})=>s.jsxs(i,{children:[s.jsx(m,{children:"Admin Name"}),s.jsx(c,{children:s.jsx(l,{placeholder:"",...r})}),s.jsx(d,{})]})}),s.jsx(n,{name:"email",render:({field:r})=>s.jsxs(i,{children:[s.jsx(m,{children:"Admin Email"}),s.jsx(c,{children:s.jsx(l,{placeholder:"",...r})}),s.jsx(d,{})]})})]}),s.jsxs("div",{className:"flex gap-6",children:[s.jsx(n,{name:"password",render:({field:r})=>s.jsxs(i,{children:[s.jsx(m,{children:"Password"}),s.jsx(c,{children:s.jsx(l,{type:"password",placeholder:"",...r})}),s.jsx(d,{})]})}),s.jsx(n,{name:"passwordConfirmation",render:({field:r})=>s.jsxs(i,{children:[s.jsx(m,{children:"Password Confirmation"}),s.jsx(c,{children:s.jsx(l,{type:"password",placeholder:"",...r})}),s.jsx(d,{})]})})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(C,{type:"submit",className:"mx-auto",children:"Add Admin"})})]})})};export{O as AdminsForm};
