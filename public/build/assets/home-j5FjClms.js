import{r as c,m as b,j as e,L as j,$ as N}from"./app-Czs23nQE.js";import{A as v}from"./app-layout-r9Mq45zs.js";import{B as x}from"./button-DqmY0HPj.js";import{S}from"./separator-D0PKC2xi.js";import{c as w}from"./utils-DExUAd-r.js";import{c as u}from"./adminNavigation-LYakUnUI.js";import"./index-CnRgvBdN.js";import"./createLucideIcon-A6yz2IB7.js";import"./index-tjxkJMb2.js";import"./index-BIAITH7B.js";import"./index-B4FefWCI.js";import"./app-logo-icon-CYJroyvk.js";import"./users-BoW8H2VN.js";const T=[{title:"Home - dashboard",href:"/pages/home"}],y=()=>{const n=window.location.pathname.split("/");return n[n.length-1]},U=({initialContent:r})=>{const n=window.location.pathname,s=y(),[p,h]=c.useState(u),{data:a,setData:o,patch:f,processing:i,errors:m}=b({ref:`page.${s}`,attrs:{bannerText:"",bannerSubtitle:"",ctaButtonText:"",featuredSection:""}});c.useEffect(()=>{h(u.map(t=>({...t,isActive:t.href===n})))},[n]),c.useEffect(()=>{if(console.log("Initial content received:",r),r&&r[`page.${s}`]){const t=r[`page.${s}`];console.log("Existing content for this page:",t),o(l=>{const d={ref:`page.${s}`,attrs:{...l.attrs,...t.attrs}};return console.log("Setting form data to:",d),d})}else console.log("No existing content found for this page")},[r,s,o]);const g=t=>{t.preventDefault(),f(route("update.content"),{onSuccess:()=>{console.log("Content updated successfully")}})};return e.jsxs(v,{breadcrumbs:T,children:[e.jsx(j,{title:"Home"}),e.jsxs("div",{className:"flex flex-col space-y-8 lg:flex-row lg:space-y-0 lg:space-x-12",children:[e.jsx("aside",{className:"w-full max-w-xl lg:w-48",children:e.jsx("nav",{className:"flex flex-col space-y-1 space-x-0",children:p.map((t,l)=>e.jsx(x,{size:"sm",variant:"ghost",asChild:!0,className:w("w-full justify-start",{"bg-muted":t.isActive||n===t.href}),children:e.jsx(N,{href:t.href,prefetch:!0,children:t.title})},`${t.href}-${l}`))})}),e.jsx(S,{className:"my-6 md:hidden"}),e.jsxs("div",{className:"flex-1 md:max-w-2xl pt-4",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6",children:[s.charAt(0).toUpperCase()+s.slice(1)," Content"]}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"bannerText",className:"text-sm font-medium",children:"Banner Text"}),e.jsx("input",{id:"bannerText",type:"text",className:"p-2 border rounded",value:a.attrs.bannerText??"",onChange:t=>o("attrs",{...a.attrs,bannerText:t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"bannerSubtitle",className:"text-sm font-medium",children:"Banner Subtitle"}),e.jsx("textarea",{id:"bannerSubtitle",rows:3,className:"p-2 border rounded",value:a.attrs.bannerSubtitle||"",onChange:t=>o("attrs",{...a.attrs,bannerSubtitle:t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"ctaButtonText",className:"text-sm font-medium",children:"CTA Button Text"}),e.jsx("input",{id:"ctaButtonText",type:"text",className:"p-2 border rounded",value:a.attrs.ctaButtonText||"",onChange:t=>o("attrs",{...a.attrs,ctaButtonText:t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"featuredSection",className:"text-sm font-medium",children:"Featured Section Content"}),e.jsx("textarea",{id:"featuredSection",rows:5,className:"p-2 border rounded",value:a.attrs.featuredSection||"",onChange:t=>o("attrs",{...a.attrs,featuredSection:t.target.value})})]}),m.attrs&&e.jsx("p",{className:"text-red-500 text-sm",children:m.attrs}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(x,{type:"submit",disabled:i,children:i?"Saving...":"Save Content"})})]})]})]})]})};export{U as default};
