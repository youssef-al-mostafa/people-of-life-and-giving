import{r as y,j as e,L as g,$ as C,a as w}from"./app-Czs23nQE.js";import{u as N,F,a as n,b as i,c as m,d as c,e as d,B as S,f as j,s as E}from"./index-bPRgQ2sw.js";import{z as p}from"./index-C4bLmoCR.js";import{I as l}from"./input-D5JXjANv.js";import{A as v}from"./app-layout-r9Mq45zs.js";import{A as P}from"./arrow-left-BEOqx6Hl.js";import"./utils-DExUAd-r.js";import"./index-BIAITH7B.js";import"./button-DqmY0HPj.js";import"./index-CnRgvBdN.js";import"./createLucideIcon-A6yz2IB7.js";import"./index-tjxkJMb2.js";import"./index-B4FefWCI.js";import"./app-logo-icon-CYJroyvk.js";import"./users-BoW8H2VN.js";const L=[{title:"Admins",href:"/admin/create"}],A=p.string().min(8,"Password must be at least 8 characters").refine(s=>/[A-Z]/.test(s),"Password must contain at least one uppercase letter").refine(s=>/[a-z]/.test(s),"Password must contain at least one lowercase letter").refine(s=>/\d/.test(s),"Password must contain at least one number"),I=p.object({name:p.string().min(2).max(50),email:p.string().email(),password:A,passwordConfirmation:A}).refine(s=>s.password===s.passwordConfirmation,{message:"Passwords do not match",path:["passwordConfirmation"]});function H(){const[s,u]=y.useState(!1),t=N({resolver:E(I),defaultValues:{name:"",email:"",password:"",passwordConfirmation:""}});async function b(r){var h;try{const a=route("admin.add");u(!0);const{passwordConfirmation:x,...f}=r,o=await w.post(a,f,{headers:{"X-CSRF-TOKEN":(h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.getAttribute("content"),"Content-Type":"application/json",Accept:"application/json"}});j.success("Admin created successfully"),t.reset()}catch(a){if(w.isAxiosError(a)&&a.response){const x=a.response.data.errors;x?Object.entries(x).forEach(([f,o])=>{t.setError(f,{type:"server",message:Array.isArray(o)?o[0]:o})}):j.error(a.response.data.message||"An error occurred")}else j.error("Failed to create admin"),console.error("Error creating admin:",a)}finally{u(!1),window.location.href=route("admin.all")}}return e.jsxs(v,{breadcrumbs:L,children:[e.jsx(g,{title:"Admins"}),e.jsxs("div",{className:"p-4",children:[e.jsxs(C,{href:route("admin.all"),className:`btn btn-primary h-fit py-1
                      w-fit rounded-lg`,children:[e.jsx(P,{}),"Back to Admins"]}),e.jsx("div",{className:"flex items-center justify-center mt-7 mb-9",children:e.jsx("h1",{className:"text-3xl font-extrabold",children:"Create Admin"})}),e.jsx(F,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(b),className:"space-y-8 w-fit mx-auto",children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(n,{name:"name",render:({field:r})=>e.jsxs(i,{className:"w-96",children:[e.jsx(m,{children:"Admin Name"}),e.jsx(c,{children:e.jsx(l,{placeholder:"",...r})}),e.jsx(d,{})]})}),e.jsx(n,{name:"email",render:({field:r})=>e.jsxs(i,{children:[e.jsx(m,{children:"Admin Email"}),e.jsx(c,{children:e.jsx(l,{placeholder:"",...r})}),e.jsx(d,{})]})})]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(n,{name:"password",render:({field:r})=>e.jsxs(i,{children:[e.jsx(m,{children:"Password"}),e.jsx(c,{children:e.jsx(l,{type:"password",placeholder:"",...r})}),e.jsx(d,{})]})}),e.jsx(n,{name:"passwordConfirmation",render:({field:r})=>e.jsxs(i,{children:[e.jsx(m,{children:"Password Confirmation"}),e.jsx(c,{children:e.jsx(l,{type:"password",placeholder:"",...r})}),e.jsx(d,{})]})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(S,{type:"submit",className:"mx-auto",children:"Add Admin"})})]})})]})]})}export{H as default};
